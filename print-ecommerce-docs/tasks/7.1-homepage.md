# Task 7.1: Homepage

## Goal
Build homepage with hero, featured products, and categories.

## Instructions

### Create Homepage
Create `frontend/src/pages/IndexPage.vue`:

```vue
<template>
  <q-page>
    <HeroBanner :banner="homepage?.hero_banner" />

    <section class="q-pa-md q-pa-lg-xl">
      <div class="container">
        <h2 class="text-h4 q-mb-lg text-center">{{ $t('home.featuredProducts') }}</h2>
        <ProductGrid :products="featuredProducts" :loading="loading" />
        <div class="text-center q-mt-lg">
          <q-btn
            color="primary"
            outline
            :label="$t('home.viewAll')"
            :to="{ name: 'products' }"
          />
        </div>
      </div>
    </section>

    <CategoryShowcase :categories="categories" />

    <section class="q-pa-md q-pa-lg-xl bg-grey-1">
      <div class="container">
        <h2 class="text-h4 q-mb-lg text-center">{{ $t('home.whyChooseUs') }}</h2>
        <div class="row q-col-gutter-lg">
          <div class="col-12 col-md-4" v-for="feature in features" :key="feature.icon">
            <FeatureCard :feature="feature" />
          </div>
        </div>
      </div>
    </section>

    <PromotionalBanner v-if="homepage?.promo_banner" :banner="homepage.promo_banner" />

    <section class="q-pa-md q-pa-lg-xl">
      <div class="container">
        <h2 class="text-h4 q-mb-lg text-center">{{ $t('home.testimonials') }}</h2>
        <TestimonialCarousel :testimonials="homepage?.testimonials || []" />
      </div>
    </section>
  </q-page>
</template>

<script setup lang="ts">
import { ref, computed, onMounted } from 'vue';
import { useI18n } from 'vue-i18n';
import { strapiService } from 'src/services/strapi.service';
import { useSeo } from 'src/composables/useSeo';
import HeroBanner from 'src/components/home/HeroBanner.vue';
import ProductGrid from 'src/components/products/ProductGrid.vue';
import CategoryShowcase from 'src/components/home/CategoryShowcase.vue';
import FeatureCard from 'src/components/home/FeatureCard.vue';
import PromotionalBanner from 'src/components/home/PromotionalBanner.vue';
import TestimonialCarousel from 'src/components/home/TestimonialCarousel.vue';

const { t, locale } = useI18n();

useSeo({
  title: t('home.seoTitle'),
  description: t('home.seoDescription'),
});

const homepage = ref<any>(null);
const featuredProducts = ref<any[]>([]);
const categories = ref<any[]>([]);
const loading = ref(true);

const features = computed(() => [
  {
    icon: 'local_shipping',
    title: t('home.features.fastDelivery.title'),
    description: t('home.features.fastDelivery.description'),
  },
  {
    icon: 'verified',
    title: t('home.features.quality.title'),
    description: t('home.features.quality.description'),
  },
  {
    icon: 'support_agent',
    title: t('home.features.support.title'),
    description: t('home.features.support.description'),
  },
]);

onMounted(async () => {
  try {
    const [homepageRes, productsRes, categoriesRes] = await Promise.all([
      strapiService.getHomepage(locale.value),
      strapiService.getFeaturedProducts(),
      strapiService.getCategories(),
    ]);

    homepage.value = homepageRes.data?.attributes;
    featuredProducts.value = productsRes.data || [];
    categories.value = categoriesRes.data || [];
  } finally {
    loading.value = false;
  }
});
</script>

<style lang="scss" scoped>
.container {
  max-width: 1200px;
  margin: 0 auto;
}
</style>
```

### Create HeroBanner Component
Create `frontend/src/components/home/HeroBanner.vue`:

```vue
<template>
  <div class="hero-banner relative-position">
    <q-img
      :src="banner?.image?.data?.attributes?.url || '/images/default-hero.jpg'"
      :ratio="16/6"
      class="hero-image"
    >
      <div class="absolute-full hero-overlay flex flex-center">
        <div class="text-center text-white q-pa-md">
          <h1 class="text-h2 text-weight-bold q-mb-md">
            {{ localizedTitle }}
          </h1>
          <p class="text-h5 q-mb-lg">
            {{ localizedSubtitle }}
          </p>
          <q-btn
            v-if="banner?.cta_link"
            color="white"
            text-color="primary"
            size="lg"
            :label="localizedCta"
            :to="banner.cta_link"
          />
        </div>
      </div>
    </q-img>
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue';
import { useI18n } from 'vue-i18n';

const props = defineProps<{ banner?: any }>();
const { locale } = useI18n();

const localizedTitle = computed(() => {
  return locale.value === 'he' ? props.banner?.title_he : props.banner?.title_en;
});

const localizedSubtitle = computed(() => {
  return locale.value === 'he' ? props.banner?.subtitle_he : props.banner?.subtitle_en;
});

const localizedCta = computed(() => {
  return locale.value === 'he' ? props.banner?.cta_text_he : props.banner?.cta_text_en;
});
</script>

<style lang="scss" scoped>
.hero-banner {
  .hero-overlay {
    background: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.3),
      rgba(0, 0, 0, 0.5)
    );
  }
}
</style>
```

### Create CategoryShowcase Component
Create `frontend/src/components/home/CategoryShowcase.vue`:

```vue
<template>
  <section class="category-showcase q-pa-md q-pa-lg-xl bg-grey-2">
    <div class="container">
      <h2 class="text-h4 q-mb-lg text-center">{{ $t('home.shopByCategory') }}</h2>
      <div class="row q-col-gutter-md">
        <div
          v-for="category in displayedCategories"
          :key="category.id"
          class="col-6 col-md-3"
        >
          <q-card
            class="category-card cursor-pointer"
            @click="navigateToCategory(category)"
          >
            <q-img
              :src="category.attributes.image?.data?.attributes?.url"
              :ratio="1"
            >
              <div class="absolute-bottom text-center q-pa-sm bg-white">
                <div class="text-subtitle1 text-weight-medium">
                  {{ getLocalizedName(category) }}
                </div>
              </div>
            </q-img>
          </q-card>
        </div>
      </div>
    </div>
  </section>
</template>

<script setup lang="ts">
import { computed } from 'vue';
import { useRouter } from 'vue-router';
import { useI18n } from 'vue-i18n';

const props = defineProps<{ categories: any[] }>();

const router = useRouter();
const { locale } = useI18n();

const displayedCategories = computed(() => {
  return props.categories.filter(c => c.attributes.is_active).slice(0, 8);
});

const getLocalizedName = (category: any) => {
  return locale.value === 'he'
    ? category.attributes.name_he || category.attributes.name_en
    : category.attributes.name_en;
};

const navigateToCategory = (category: any) => {
  router.push({
    name: 'category',
    params: { slug: category.attributes.slug },
  });
};
</script>

<style lang="scss" scoped>
.container {
  max-width: 1200px;
  margin: 0 auto;
}

.category-card {
  transition: transform 0.3s ease;

  &:hover {
    transform: translateY(-4px);
  }
}
</style>
```

### Create FeatureCard Component
Create `frontend/src/components/home/FeatureCard.vue`:

```vue
<template>
  <q-card flat class="text-center q-pa-lg">
    <q-icon
      :name="feature.icon"
      size="48px"
      color="primary"
      class="q-mb-md"
    />
    <div class="text-h6 q-mb-sm">{{ feature.title }}</div>
    <div class="text-body2 text-grey-7">{{ feature.description }}</div>
  </q-card>
</template>

<script setup lang="ts">
defineProps<{
  feature: {
    icon: string;
    title: string;
    description: string;
  };
}>();
</script>
```

### Create TestimonialCarousel Component
Create `frontend/src/components/home/TestimonialCarousel.vue`:

```vue
<template>
  <q-carousel
    v-model="slide"
    animated
    navigation
    infinite
    autoplay
    :autoplay-delay="5000"
    class="testimonial-carousel"
  >
    <q-carousel-slide
      v-for="(testimonial, index) in testimonials"
      :key="index"
      :name="index"
      class="q-pa-md"
    >
      <div class="row justify-center">
        <div class="col-12 col-md-8 text-center">
          <q-icon name="format_quote" size="48px" color="grey-4" class="q-mb-md" />
          <p class="text-h6 text-weight-light q-mb-md">
            "{{ getLocalizedContent(testimonial) }}"
          </p>
          <div class="text-subtitle1 text-weight-medium">
            {{ testimonial.author_name }}
          </div>
          <q-rating
            :model-value="testimonial.rating || 5"
            readonly
            size="20px"
            color="warning"
          />
        </div>
      </div>
    </q-carousel-slide>
  </q-carousel>
</template>

<script setup lang="ts">
import { ref } from 'vue';
import { useI18n } from 'vue-i18n';

const props = defineProps<{ testimonials: any[] }>();
const { locale } = useI18n();

const slide = ref(0);

const getLocalizedContent = (testimonial: any) => {
  return locale.value === 'he'
    ? testimonial.content_he || testimonial.content_en
    : testimonial.content_en;
};
</script>

<style lang="scss" scoped>
.testimonial-carousel {
  height: 300px;
  background: transparent;
}
</style>
```

### Create Strapi Homepage Single Type
Create content type in Strapi admin for homepage:

```javascript
// backend/src/api/homepage/content-types/homepage/schema.json
{
  "kind": "singleType",
  "collectionName": "homepages",
  "info": {
    "singularName": "homepage",
    "pluralName": "homepages",
    "displayName": "Homepage"
  },
  "attributes": {
    "hero_banner": {
      "type": "component",
      "component": "homepage.hero-banner"
    },
    "promo_banner": {
      "type": "component",
      "component": "homepage.promo-banner"
    },
    "testimonials": {
      "type": "component",
      "component": "homepage.testimonial",
      "repeatable": true
    }
  }
}
```

## Acceptance Criteria
- [ ] Hero banner displays
- [ ] Featured products load
- [ ] Categories showcase works
- [ ] Features section displays
- [ ] Testimonials carousel works
- [ ] All text is translated
