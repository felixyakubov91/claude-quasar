# Task 4.4: Save Transformations

## Goal
Save edited images and transformations to Strapi.

## Instructions

### Create Upload Composable
Create `frontend/src/composables/useUpload.ts`:

```typescript
import { ref } from 'vue';
import { strapiService } from 'src/services/strapi.service';
import { cloudinaryService } from 'src/services/cloudinary.service';
import { useAuth } from './useAuth';

export function useUpload() {
  const { user, session } = useAuth();
  const uploading = ref(false);
  const uploadedImages = ref<any[]>([]);

  const saveUploadedImage = async (cloudinaryResult: any, transformations: any = {}) => {
    const data = {
      customer: user.value?.id,
      cloudinary_public_id: cloudinaryResult.publicId,
      cloudinary_url: cloudinaryResult.url,
      original_filename: cloudinaryResult.original_filename,
      file_size: cloudinaryResult.bytes,
      width: cloudinaryResult.width,
      height: cloudinaryResult.height,
      format: cloudinaryResult.format,
      transformations,
    };

    const response = await strapiService.createUploadedImage(data, session.value?.access_token);
    uploadedImages.value.push(response.data);
    return response.data;
  };

  const getTransformedUrl = (publicId: string, transformations: any) => {
    return cloudinaryService.buildUrl(publicId, {
      ...transformations,
      q: 'auto',
      f: 'auto',
    });
  };

  return {
    uploading,
    uploadedImages,
    saveUploadedImage,
    getTransformedUrl,
  };
}
```

## Acceptance Criteria
- [ ] Transformations save to Strapi
- [ ] URLs generate correctly
- [ ] Images linked to customer
