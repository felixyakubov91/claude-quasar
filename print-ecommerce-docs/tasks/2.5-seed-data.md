# Task 2.5: Seed Data

## Goal
Create sample categories, products, and shipping zones for development.

## Instructions

### Step 1: Create Seed Script

Create `backend/database/seeds/seed.js`:

```javascript
'use strict';

module.exports = async ({ strapi }) => {
  // Check if already seeded
  const existingCategories = await strapi.entityService.findMany('api::category.category');
  if (existingCategories.length > 0) {
    console.log('Database already seeded, skipping...');
    return;
  }

  console.log('Seeding database...');

  // Create categories
  const categories = [
    { slug: 'business-cards', name_en: 'Business Cards', name_he: 'כרטיסי ביקור', sort_order: 1 },
    { slug: 'flyers', name_en: 'Flyers & Brochures', name_he: 'פלאיירים וחוברות', sort_order: 2 },
    { slug: 'posters', name_en: 'Posters & Banners', name_he: 'פוסטרים ובאנרים', sort_order: 3 },
    { slug: 'stickers', name_en: 'Stickers & Labels', name_he: 'מדבקות ותוויות', sort_order: 4 },
    { slug: 'photo-prints', name_en: 'Photo Prints', name_he: 'הדפסות תמונות', sort_order: 5 },
  ];

  const createdCategories = {};
  for (const cat of categories) {
    const created = await strapi.entityService.create('api::category.category', {
      data: { ...cat, is_active: true, publishedAt: new Date() },
    });
    createdCategories[cat.slug] = created;
  }

  // Create products
  const products = [
    {
      slug: 'premium-business-cards',
      name_en: 'Premium Business Cards',
      name_he: 'כרטיסי ביקור פרימיום',
      description_en: 'High-quality business cards with premium finish',
      description_he: 'כרטיסי ביקור איכותיים עם גימור פרימיום',
      base_price: 49.99,
      category: createdCategories['business-cards'].id,
      requires_upload: true,
      is_featured: true,
      options: [
        {
          type: 'size',
          name_en: 'Size',
          name_he: 'גודל',
          is_required: true,
          values: [
            { value: 'standard', label_en: 'Standard (85x55mm)', label_he: 'סטנדרטי (85x55 מ"מ)', price_modifier: 0 },
            { value: 'square', label_en: 'Square (55x55mm)', label_he: 'מרובע (55x55 מ"מ)', price_modifier: 5 },
          ],
        },
        {
          type: 'paper',
          name_en: 'Paper Type',
          name_he: 'סוג נייר',
          is_required: true,
          values: [
            { value: 'matte', label_en: 'Matte 350gsm', label_he: 'מט 350 גרם', price_modifier: 0 },
            { value: 'glossy', label_en: 'Glossy 350gsm', label_he: 'מבריק 350 גרם', price_modifier: 10 },
          ],
        },
      ],
      pricing_tiers: [
        { min_quantity: 100, max_quantity: 249, price_per_unit: 0.50 },
        { min_quantity: 250, max_quantity: 499, price_per_unit: 0.35 },
        { min_quantity: 500, max_quantity: 1000, price_per_unit: 0.25 },
      ],
    },
    // Add more products...
  ];

  for (const product of products) {
    await strapi.entityService.create('api::product.product', {
      data: { ...product, is_active: true, publishedAt: new Date() },
    });
  }

  // Create shipping zones
  const zones = [
    {
      name: 'Tel Aviv Area',
      regions: ['Tel Aviv', 'Ramat Gan', 'Givatayim', 'Holon', 'Bat Yam'],
      rates: [
        { name: 'Standard', min_weight: 0, max_weight: 5, price: 25 },
        { name: 'Express', min_weight: 0, max_weight: 5, price: 45 },
      ],
    },
    {
      name: 'Central Israel',
      regions: ['Jerusalem', 'Haifa', 'Netanya', 'Petah Tikva'],
      rates: [
        { name: 'Standard', min_weight: 0, max_weight: 5, price: 35 },
        { name: 'Express', min_weight: 0, max_weight: 5, price: 55 },
      ],
    },
  ];

  for (const zone of zones) {
    await strapi.entityService.create('api::shipping-zone.shipping-zone', {
      data: { ...zone, is_active: true, publishedAt: new Date() },
    });
  }

  console.log('Database seeded successfully!');
};
```

### Step 2: Run Seed on Bootstrap

Update `backend/src/index.js`:

```javascript
'use strict';

module.exports = {
  async bootstrap({ strapi }) {
    if (process.env.NODE_ENV === 'development') {
      const seed = require('../database/seeds/seed');
      await seed({ strapi });
    }
  },
};
```

## Acceptance Criteria
- [ ] Categories created on first run
- [ ] Sample products with options/pricing tiers
- [ ] Shipping zones configured
- [ ] Seed skips if data exists
